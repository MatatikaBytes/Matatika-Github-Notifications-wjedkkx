version: datasets/v0.2
source: github
title: Issues Created and Closed Last 30 Days
questions: how many issues have been created and closed during the last 30 days?
description: |-
  Issues created and closed for the last 30 days.

  #issues
metadata: |-
  {
    "name": "fds",
    "related_table": {
      "columns": [
        {"name": "date", "label": "Date", "description": "Date"}
      ], 
      "aggregates": [
        {"name": "created_issues", "label": "Created Issues", "description": "Created Issues"}, 
        {"name": "closed_issues", "label": "Closed Issues", "description": "Closed Issues"}
      ]
    }
  }
visualisation: |-
  {
    "chartjs-chart": {
      "chartType": "line", 
      "options": {
        "scales": {
          "y": {
            "beginAtZero": true,
            "ticks": {
              "stepSize": 1
            }
          }
        }
      }
    }
  }
query: |-
  SELECT
  	date_day "fds.date"
  	, COALESCE(created_issues, 0) "fds.created_issues"
  	, COALESCE(closed_issues, 0) "fds.closed_issues"
  FROM fact_daily_stats fds
  WHERE date_day > current_date - INTERVAL '30 day'
  AND date_day <= current_date
  ORDER BY date_day::date ASC
